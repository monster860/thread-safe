(()=>{"use strict";var t={156:t=>{t.exports=JSON.parse('{"compressionlevel":-1,"height":24,"infinite":false,"layers":[{"data":[8,7,9,8,7,8,1,2,2,2,2,2,1,7,8,8,10,9,9,10,10,9,10,10,7,9,8,10,9,10,8,3,6,5,6,3,6,1,2,2,2,2,2,1,3,5,5,3,4,5,4,5,4,4,3,6,5,6,4,3,6,4,5,6,3,5,5,5,1,2,2,2,2,2,1,5,4,3,3,5,6,3,4,5,5,3,3,5,5,4,6,6,4,6,5,3,6,4,4,1,2,2,2,2,2,1,4,5,6,3,4,6,6,5,4,5,3,3,5,6,4,6,5,6,3,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,1,2,2,2,1,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,1,2,2,2,2,2,2,1,2,43,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,3,1,2,2,2,2,2,2,1,2,43,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,1,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,1,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,1,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,11,1,1,1,1,1,2,1,5,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,11,1,1,1,1,1,1,2,1,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,1,1,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"height":24,"id":1,"name":"Background","opacity":1,"properties":[{"name":"grass_level","type":"int","value":0}],"type":"tilelayer","visible":true,"width":31,"x":0,"y":0},{"draworder":"topdown","id":2,"name":"Objects","objects":[{"height":0,"id":3,"name":"","point":true,"rotation":0,"type":"spawn","visible":true,"width":0,"x":224,"y":256},{"height":0,"id":4,"name":"","point":true,"properties":[{"name":"continuous","type":"bool","value":false},{"name":"continuous_bounce","type":"bool","value":false},{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":-8},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dy","type":"float","value":-240},{"name":"rotation_final","type":"float","value":90},{"name":"rotation_initial","type":"float","value":90},{"name":"tag","type":"string","value":"riser"},{"name":"transition_time","type":"float","value":1}],"rotation":0,"type":"gate","visible":true,"width":0,"x":304,"y":368},{"height":0,"id":5,"name":"","point":true,"properties":[{"name":"facing_right","type":"bool","value":false},{"name":"floored","type":"bool","value":true},{"name":"reset_time","type":"float","value":3},{"name":"target_tag","type":"string","value":"riser"}],"rotation":0,"type":"switch","visible":true,"width":0,"x":368,"y":576},{"height":0,"id":6,"name":"","point":true,"rotation":0,"type":"bonus_coin","visible":true,"width":0,"x":576,"y":224},{"height":0,"id":7,"name":"","point":true,"properties":[{"name":"length_to_add","type":"float","value":180}],"rotation":0,"type":"thread_extension","visible":true,"width":0,"x":368,"y":336},{"height":0,"id":8,"name":"","polygon":[{"x":0,"y":0},{"x":0,"y":-32},{"x":-96,"y":-32},{"x":-96,"y":128},{"x":-128,"y":128},{"x":-128,"y":-32},{"x":-256,"y":-32},{"x":-256,"y":0},{"x":-160,"y":0},{"x":-160,"y":160},{"x":-64,"y":160},{"x":-64,"y":64},{"x":-80,"y":64},{"x":-80,"y":0}],"rotation":0,"type":"","visible":true,"width":0,"x":416,"y":288},{"height":0,"id":10,"name":"","point":true,"properties":[{"name":"continuous","type":"bool","value":false},{"name":"continuous_bounce","type":"bool","value":false},{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":-8},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dx","type":"float","value":320},{"name":"move_dy","type":"float","value":0},{"name":"rotation_final","type":"float","value":90},{"name":"rotation_initial","type":"float","value":90},{"name":"tag","type":"string","value":"push_right"},{"name":"transition_time","type":"float","value":1}],"rotation":0,"type":"gate","visible":true,"width":0,"x":344,"y":320},{"height":0,"id":11,"name":"","point":true,"properties":[{"name":"facing_right","type":"bool","value":false},{"name":"floored","type":"bool","value":true},{"name":"reset_time","type":"float","value":2},{"name":"target_tag","type":"string","value":"push_right"}],"rotation":0,"type":"switch","visible":true,"width":0,"x":112,"y":576},{"height":0,"id":13,"name":"","point":true,"properties":[{"name":"continuous","type":"bool","value":true},{"name":"continuous_bounce","type":"bool","value":true},{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":-8},{"name":"easing_constant","type":"float","value":4.7},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dx","type":"float","value":0},{"name":"move_dy","type":"float","value":-256},{"name":"rotation_final","type":"float","value":0},{"name":"rotation_initial","type":"float","value":0},{"name":"tag","type":"string","value":""},{"name":"transition_time","type":"float","value":3}],"rotation":0,"type":"gate","visible":true,"width":0,"x":864,"y":448},{"height":0,"id":14,"name":"","polygon":[{"x":0,"y":0},{"x":0,"y":-160},{"x":-160,"y":-160},{"x":-224,"y":-96},{"x":-224,"y":0}],"rotation":0,"type":"","visible":true,"width":0,"x":928,"y":640},{"height":0,"id":15,"name":"","point":true,"properties":[{"name":"length_to_add","type":"float","value":300}],"rotation":0,"type":"thread_extension","visible":true,"width":0,"x":864,"y":224},{"height":0,"id":17,"name":"","point":true,"properties":[{"name":"length_to_add","type":"float","value":60}],"rotation":0,"type":"thread_extension","visible":true,"width":0,"x":944,"y":528},{"height":0,"id":19,"name":"","point":true,"rotation":0,"type":"exit","visible":true,"width":0,"x":64,"y":736},{"height":0,"id":20,"name":"","polygon":[{"x":0,"y":0},{"x":-224,"y":0},{"x":-224,"y":768},{"x":768,"y":768},{"x":768,"y":0},{"x":160,"y":0},{"x":160,"y":160},{"x":736,"y":160},{"x":736,"y":736},{"x":64,"y":736},{"x":64,"y":672},{"x":0,"y":672},{"x":0,"y":736},{"x":-192,"y":736},{"x":-192,"y":608},{"x":160,"y":608},{"x":160,"y":704},{"x":224,"y":704},{"x":224,"y":672},{"x":192,"y":672},{"x":192,"y":576},{"x":-160,"y":576},{"x":-160,"y":160},{"x":0,"y":160}],"rotation":0,"type":"","visible":true,"width":0,"x":224,"y":0}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":21,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.8.4","tileheight":32,"tilesets":[{"firstgid":1,"source":"tileset.json"}],"tilewidth":32,"type":"map","version":"1.8","width":31}')},177:t=>{t.exports=JSON.parse('{"compressionlevel":-1,"height":40,"infinite":false,"layers":[{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,10,7,8,7,9,9,7,8,8,7,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,8,7,5,4,6,6,6,4,5,6,4,5,4,4,5,1,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,5,6,4,5,3,3,4,3,4,5,5,4,5,6,6,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,3,4,3,4,5,3,3,4,6,5,4,5,3,3,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,4,5,5,5,6,6,6,3,6,5,5,3,3,3,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,6,5,3,4,4,6,5,6,4,4,3,5,5,5,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,5,5,6,4,6,6,3,5,6,3,4,5,3,6,1,2,2,2,15,1,15,15,2,2,2,2,2,2,2,2,1,3,5,5,6,4,3,5,3,6,5,5,4,3,6,4,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,6,4,4,4,6,5,4,5,5,6,5,3,4,6,4,1,1,1,2,2,15,1,1,1,13,14,1,1,1,1,1,1,1,1,6,5,6,4,6,5,6,6,6,4,5,6,4,5,6,1,16,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,4,5,5,4,4,5,6,4,5,3,3,6,5,3,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,5,6,6,4,4,4,3,6,4,5,6,5,6,5,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,3,4,5,6,3,6,4,3,3,6,4,6,4,1,2,2,2,2,1,3,3,5,6,3,6,3,4,5,3,3,4,3,3,3,5,3,4,4,6,4,3,4,3,3,4,1,2,2,2,2,1,6,3,6,3,4,4,3,5,6,4,4,4,5,4,5,6,5,5,5,6,5,4,3,4,5,3,1,2,2,2,2,1,5,3,5,6,3,4,5,5,4,5,5,6,4,3,6,6,3,5,5,4,5,4,4,3,6,3,1,2,2,2,2,1,6,3,3,4,3,3,4,6,3,3,4,4,5,5,5,6,5,4,6,6,6,6,3,6,3,6,1,2,2,2,2,1,6,6,6,3,3,5,3,5,6,4,3,3,5,4,6,6,3,5,3,3,3,3,4,6,6,5,1,2,2,2,2,1,5,4,4,5,6,3,3,6,4,3,3,4,5,5,6,3,3,6,6,5,5,5,6,5,5,5,1,2,2,2,2,1,3,3,3,3,6,5,3,3,5,5,4,3,4,3,4,4,4,4,4,6,5,5,6,4,6,6,1,2,2,2,2,1,6,3,5,3,3,6,5,6,3,6,5,6,3,6,6,3,6,4,6,4,5,4,6,4,4,3,1,2,2,2,2,1,4,6,3,3,3,3,4,6,3,6,6,5,4,5,3,4,5,5,6,4,4,3,3,3,5,5,1,2,2,2,2,1,5,4,5,4,4,6,6,5,3,6,4,4,3,6,5,4,6,4,5,5,6,3,5,3,6,5,1,2,2,2,2,1,5,6,3,5,6,5,6,6,3,5,5,4,5,4,6,5,3,6,4,4,5,3,6,6,5,4,1,2,2,2,2,1,3,4,5,3,4,6,3,4,3,5,3,4,4,4,6,3,3,3,6,6,4,5,4,4,3,5,1,2,2,2,2,1,5,4,3,6,6,4,4,4,6,3,4,5,4,6,3,6,6,6,6,5,3,5,5,6,4,6,1,2,2,2,2,1,6,3,5,5,5,5,6,5,3,5,4,3,4,3,3,5,4,4,4,5,5,6,6,5,1,1,1,2,2,2,2,1,6,6,6,3,4,4,4,6,5,6,3,4,5,6,6,5,5,5,6,5,5,3,3,5,1,2,2,2,2,2,2,1,4,3,5,3,6,4,4,3,5,4,4,3,4,4,5,4,4,4,4,4,4,3,4,4,1,2,2,2,2,2,2,1,4,6,3,6,5,3,4,3,6,5,3,6,3,5,6,3,4,6,5,4,6,5,6,6,1,2,2,2,2,2,2,1,5,5,6,3,3,5,6,3,3,3,6,6,4,6,5,3,6,3,4,6,3,5,5,4,1,2,2,2,2,2,2,1,5,4,6,5,5,3,5,6,6,4,5,6,4,3,6,5,5,3,5,3,3,3,4,3,1,1,1,1,2,2,1,1,4,3,5,3,5,5,6,3,3,3,6,4,6,6,4,6,4,4,4,4,6,3,3,3,6,3,5,1,1,1,1,3,3,6,5,6,4,6,6,5,6,3,4,5,5,6,4,3,6,6,4,6,5,3,6,3,3,4,3,3,3,3,3,4,4,6,6,3,6,6,6,5,3,3,3,4,4,6,5,5,5,4,5,3,5,3,4,4,4,6,6,4,3,5,5,4,5,6,3,3,4,4,6,4,5,6,4,3,4,5,6,5,6,3,3,5,4,6,3,4,4,4,4,4,3,4,3,5,6,3,3,5,4,5,6,3,4,6,5,3],"height":40,"id":1,"name":"Background","opacity":1,"properties":[{"name":"grass_level","type":"int","value":4}],"type":"tilelayer","visible":true,"width":32,"x":0,"y":0},{"draworder":"topdown","id":2,"name":"Objects","objects":[{"height":0,"id":32,"name":"","polygon":[{"x":40,"y":128},{"x":-64,"y":128},{"x":-64,"y":80},{"x":0,"y":80},{"x":0,"y":64},{"x":-128,"y":64},{"x":-128,"y":80},{"x":-96,"y":80},{"x":-96,"y":144},{"x":-64,"y":160},{"x":32,"y":160},{"x":40,"y":136}],"rotation":0,"type":"","visible":true,"width":0,"x":672,"y":256},{"height":0,"id":33,"name":"","polygon":[{"x":352,"y":1024},{"x":352,"y":-128},{"x":256,"y":-128},{"x":256,"y":128},{"x":88,"y":128},{"x":88,"y":136},{"x":96,"y":160},{"x":320,"y":160},{"x":320,"y":224},{"x":96,"y":224},{"x":96,"y":240},{"x":32,"y":240},{"x":32,"y":224},{"x":-96,"y":224},{"x":-96,"y":256},{"x":-64,"y":256},{"x":-64,"y":864},{"x":-96,"y":864},{"x":-96,"y":896},{"x":-160,"y":896},{"x":-160,"y":864},{"x":-256,"y":864},{"x":-256,"y":736},{"x":-192,"y":736},{"x":-192,"y":256},{"x":-160,"y":256},{"x":-160,"y":192},{"x":-128,"y":192},{"x":-128,"y":176},{"x":-160,"y":176},{"x":-160,"y":128},{"x":-224,"y":128},{"x":-224,"y":-96},{"x":-32,"y":-96},{"x":-32,"y":-64},{"x":0,"y":-64},{"x":0,"y":-128},{"x":-672,"y":-128},{"x":-672,"y":1024}],"rotation":0,"type":"","visible":true,"width":0,"x":672,"y":256},{"height":0,"id":15,"name":"","point":true,"rotation":0,"type":"spawn","visible":true,"width":0,"x":640,"y":384},{"height":0,"id":21,"name":"","point":true,"properties":[{"name":"facing_right","type":"bool","value":false},{"name":"target_tag","type":"string","value":"riser"}],"rotation":0,"type":"switch","visible":true,"width":0,"x":928,"y":384},{"height":0,"id":25,"name":"","point":true,"rotation":0,"type":"exit","visible":true,"width":0,"x":960,"y":480},{"height":0,"id":26,"name":"","point":true,"properties":[{"name":"continuous","type":"bool","value":false},{"name":"continuous_bounce","type":"bool","value":false},{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":-8},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dy","type":"float","value":-280},{"name":"rotation_final","type":"float","value":90},{"name":"rotation_initial","type":"float","value":270},{"name":"tag","type":"string","value":"riser"},{"name":"transition_time","type":"float","value":2}],"rotation":0,"type":"gate","visible":true,"width":0,"x":736,"y":408},{"height":0,"id":34,"name":"","point":true,"properties":[{"name":"length_to_add","type":"float","value":232}],"rotation":0,"type":"thread_extension","visible":true,"width":0,"x":864,"y":240},{"height":40,"id":35,"name":"","rotation":0,"text":{"color":"#ffffff","text":"Remember, you can restart using R!","wrap":true},"type":"","visible":true,"width":264,"x":648,"y":520},{"height":0,"id":36,"name":"","point":true,"properties":[{"name":"length_to_add","type":"float","value":190}],"rotation":0,"type":"thread_extension","visible":true,"width":0,"x":560,"y":976},{"height":0,"id":37,"name":"","point":true,"properties":[{"name":"facing_right","type":"bool","value":true},{"name":"target_tag","type":"string","value":"elevator|boost_platform"}],"rotation":0,"type":"switch","visible":true,"width":0,"x":416,"y":1120},{"height":0,"id":38,"name":"","point":true,"properties":[{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":0},{"name":"easing_constant","type":"float","value":2.5},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dy","type":"float","value":-576},{"name":"rotation_final","type":"float","value":0},{"name":"rotation_initial","type":"float","value":0},{"name":"tag","type":"string","value":"elevator"},{"name":"transition_time","type":"float","value":4.5}],"rotation":0,"type":"gate","visible":true,"width":0,"x":544,"y":1120},{"height":0,"id":39,"name":"","point":true,"properties":[{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":0},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dy","type":"float","value":-32},{"name":"rotation_final","type":"float","value":0},{"name":"rotation_initial","type":"float","value":0},{"name":"tag","type":"string","value":"boost_platform"},{"name":"transition_time","type":"float","value":0.5}],"rotation":0,"type":"gate","visible":true,"width":0,"x":736,"y":480},{"height":0,"id":40,"name":"","point":true,"rotation":0,"type":"bonus_coin","visible":true,"width":0,"x":16,"y":112}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":42,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.8.4","tileheight":32,"tilesets":[{"firstgid":1,"source":"tileset.json"}],"tilewidth":32,"type":"map","version":"1.8","width":32}')},741:t=>{t.exports=JSON.parse('{"compressionlevel":-1,"height":40,"infinite":false,"layers":[{"data":[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,9,7,10,8,8,7,8,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,6,5,4,6,5,6,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,4,6,5,6,5,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,4,3,6,3,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,5,6,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,4,6,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,32,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],"height":40,"id":1,"name":"Background","opacity":1,"properties":[{"name":"grass_level","type":"int","value":0}],"type":"tilelayer","visible":true,"width":40,"x":0,"y":0},{"draworder":"topdown","id":2,"name":"Objects","objects":[{"height":0,"id":1,"name":"","point":true,"rotation":0,"type":"spawn","visible":true,"width":0,"x":160,"y":320},{"height":0,"id":2,"name":"","polygon":[{"x":32,"y":128},{"x":64,"y":128},{"x":64,"y":0},{"x":192,"y":0},{"x":192,"y":-32},{"x":32,"y":-32}],"rotation":0,"type":"","visible":true,"width":0,"x":128,"y":672},{"height":0,"id":3,"name":"","point":true,"properties":[{"name":"continuous","type":"bool","value":false},{"name":"continuous_bounce","type":"bool","value":false},{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":-8},{"name":"easing_constant","type":"float","value":2.5},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dx","type":"float","value":200},{"name":"move_dy","type":"float","value":0},{"name":"rotation_final","type":"float","value":70},{"name":"rotation_initial","type":"float","value":90},{"name":"tag","type":"string","value":"launcher"},{"name":"transition_time","type":"float","value":0.1}],"rotation":0,"type":"gate","visible":true,"width":0,"x":224,"y":600},{"height":0,"id":4,"name":"","point":true,"properties":[{"name":"facing_right","type":"bool","value":false},{"name":"floored","type":"bool","value":true},{"name":"reset_time","type":"float","value":0.5},{"name":"target_tag","type":"string","value":"launcher"}],"rotation":0,"type":"switch","visible":true,"width":0,"x":304,"y":640},{"height":0,"id":6,"name":"","point":true,"properties":[{"name":"continuous","type":"bool","value":true},{"name":"continuous_bounce","type":"bool","value":true},{"name":"dx","type":"float","value":-32},{"name":"dy","type":"float","value":-8},{"name":"gate_type","type":"string","value":"wood_2"},{"name":"move_dx","type":"float","value":0},{"name":"move_dy","type":"float","value":-350},{"name":"rotation_final","type":"float","value":0},{"name":"rotation_initial","type":"float","value":0},{"name":"tag","type":"string","value":"lowerer"},{"name":"transition_time","type":"float","value":2}],"rotation":0,"type":"gate","visible":true,"width":0,"x":416,"y":480},{"height":0,"id":7,"name":"","point":true,"properties":[{"name":"length_to_add","type":"float","value":280}],"rotation":0,"type":"thread_extension","visible":true,"width":0,"x":552,"y":408},{"height":0,"id":8,"name":"","point":true,"properties":[{"name":"facing_right","type":"bool","value":true},{"name":"floored","type":"bool","value":false},{"name":"target_tag","type":"string","value":"lowerer"}],"rotation":0,"type":"switch","visible":true,"width":0,"x":192,"y":736},{"height":0,"id":9,"name":"","point":true,"rotation":0,"type":"exit","visible":true,"width":0,"x":192,"y":96},{"height":0,"id":12,"name":"","point":true,"rotation":0,"type":"bonus_coin","visible":true,"width":0,"x":320,"y":64},{"height":0,"id":13,"name":"","polygon":[{"x":0,"y":0},{"x":0,"y":-928},{"x":224,"y":-928},{"x":224,"y":-960},{"x":0,"y":-960},{"x":0,"y":-1152},{"x":224,"y":-1152},{"x":224,"y":-1184},{"x":0,"y":-1184},{"x":0,"y":-1280},{"x":-32,"y":-1280},{"x":-32,"y":0}],"rotation":0,"type":"","visible":true,"width":0,"x":32,"y":1280}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":15,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.8.4","tileheight":32,"tilesets":[{"firstgid":1,"source":"tileset.json"}],"tilewidth":32,"type":"map","version":"1.8","width":40}')},874:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PhysicsObject=e.Line=void 0;const s=i(607),a=i(647);e.Line=class{constructor(t,e,i,s){this.vx1=0,this.vy1=0,this.vx2=0,this.vy2=0,this.x1=t,this.y1=e,this.x2=i,this.y2=s}instersect_ray(t,e,i,s){let a=i*i+s*s,n=-s*(this.x1-t)+i*(this.y1-e),o=-s*(this.x2-t)+i*(this.y2-e);if(o>=0!=n>=0&&o!=n){let h=i*(this.x1-t)+s*(this.y1-e),r=(-n*((i*(this.x2-t)+s*(this.y2-e)-h)/(o-n))+h)/a;if(r>0)return r}return null}point_velocity(t,e){let i=(this.x2-this.x1)**2+(this.y2-this.y1)**2,s=((t-this.x1)*(this.x2-this.x1)+(e-this.y1)*(this.y2-this.y1))/i;return[this.vx1*(1-s)+this.vx2*s,this.vy1*(1-s)+this.vy2*s]}};class n extends a.MapObject{constructor(t=0,e=0,i,s=0,a=0,n=32,o=32){super(t,e,i),this.velocity_x=0,this.velocity_y=0,this.ground_friction_enabled=!0,this.touching_floor=null,this.bound_width=n,this.bound_height=o,this.bound_x=s,this.bound_y=a}simulate(t){this.x+=this.velocity_x*t,this.y+=this.velocity_y*t+2e3*t*t,this.velocity_y+=4e3*t,this.touching_floor=null;let e=0;for(let t of s.game_instance.lines){if(t.x2>=t.x1)continue;let i=(t.y1-t.y2)/(t.x1-t.x2);if(Math.abs(i)>1)continue;if(t.x2>=this.x+this.bound_x+this.bound_width||t.x1<=this.x+this.bound_x)continue;let s=this.x+this.bound_x,a=this.y+this.bound_y+this.bound_height,n=Math.min(t.y1,t.y2);i<0&&(s+=this.bound_width);let o=i*(s-t.x2)+t.y2,h=!1;if(o<=n&&(o=n,h=!0),a>=o&&a<=o+10){this.touching_floor=t,this.y+=o-a;let[i,s]=t.point_velocity(this.x,this.y);if(this.velocity_x-=i,this.velocity_y-=s,h)e=Math.abs(this.velocity_y),this.velocity_y=0;else{let i=this.velocity_x,s=this.velocity_y,a=t.x1-t.x2,n=t.y1-t.y2,o=1/Math.sqrt(a*a+n*n);a*=o,n*=o;let h=i*a+s*n;this.velocity_x=a*h,this.velocity_y=n*h;let r=this.velocity_x-i,l=this.velocity_y-s;e+=Math.sqrt(r*r+l*l)}this.velocity_x+=i,this.velocity_y+=s}}if(this.touching_floor&&(0!=this.velocity_x||0!=this.velocity_y)&&this.ground_friction_enabled){let[t,i]=this.touching_floor.point_velocity(this.x,this.y);this.velocity_x-=t,this.velocity_y-=i;let s=Math.sqrt(this.velocity_x*this.velocity_x+this.velocity_y*this.velocity_y),a=1-Math.min(1,10*e/s);this.velocity_x*=a,this.velocity_y*=a,this.velocity_x+=t,this.velocity_y+=i}let i=[];for(let t of s.game_instance.lines){if(Math.min(t.x1,t.x2)>=this.x+this.bound_x+this.bound_width)continue;if(Math.max(t.x1,t.x2)<=this.x+this.bound_x)continue;if(Math.min(t.y1,t.y2)>=this.y+this.bound_y+this.bound_height)continue;if(Math.max(t.y1,t.y2)<=this.y+this.bound_y)continue;let e=t.y1-t.y2,s=t.x2-t.x1,a=1/Math.sqrt(e*e+s*s);e*=a,s*=a;let n=-1;for(let i=0;i<2;i++)for(let a=0;a<2;a++){let o=this.x+this.bound_x+this.bound_width*i,h=this.y+this.bound_y+this.bound_height*a,r=-((o-t.x1)*e+(h-t.y1)*s);r>=0&&r>n&&(n=r)}n>=0&&n<=16&&i.push([t,n])}i.sort(((t,e)=>t[1]-e[1]));for(let[t]of i){if(Math.min(t.x1,t.x2)>=this.x+this.bound_x+this.bound_width)continue;if(Math.max(t.x1,t.x2)<=this.x+this.bound_x)continue;if(Math.min(t.y1,t.y2)>=this.y+this.bound_y+this.bound_height)continue;if(Math.max(t.y1,t.y2)<=this.y+this.bound_y)continue;let e=t.y1-t.y2,i=t.x2-t.x1,s=1/Math.sqrt(e*e+i*i);e*=s,i*=s;let a=-1,n=this.x,o=this.y;for(let s=0;s<2;s++)for(let h=0;h<2;h++){let r=this.x+this.bound_x+this.bound_width*s,l=this.y+this.bound_y+this.bound_height*h,_=-((r-t.x1)*e+(l-t.y1)*i);_>=0&&_>a&&(a=_,n=r,o=l)}if(a>=0&&a<=16){let[s,h]=t.point_velocity(n,o);this.velocity_x-=s,this.velocity_y-=h,this.x+=a*e,this.y+=a*i;let r=this.velocity_x*e+this.velocity_y*i;this.velocity_x-=r*e,this.velocity_y-=r*i,this.velocity_x+=s,this.velocity_y+=h}}}draw(t){t.fillStyle="red",t.fillRect(this.x+this.bound_x,this.y+this.bound_y,this.bound_width,this.bound_height)}}e.PhysicsObject=n},607:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.game_instance=e.Game=void 0;const s=i(874),a=i(688),n=i(647),o=i(251),h=i(761);class r{constructor(){this.zoom=1,this.lines=[],this.objects=[],this.tagged_objects=new Map,this.player=null,this.last_time=-1,this.spawn_coordinates=[0,0],this.arrow_left=!1,this.arrow_right=!1,this.arrow_up=!1,this.arrow_down=!1,this.debug_pause=!1,this.debug_slow=!1,this.debug_enabled=!1,this.audio_ctx=new AudioContext,this.audio_scale=1/32,this.tileset_image=new Image,this.moon_image=new Image,this.title_image=new Image,this.switch_on_sound=new h.Sound("switch_on.ogg"),this.switch_off_sound=new h.Sound("switch_off.ogg"),this.thread_extend_sound=new h.Sound("thread_extend.ogg"),this.bonus_coin_sound=new h.Sound("bonus_coin.ogg"),this.tiles=[],this.tiles_width=0,this.tiles_height=0,this.current_map_index=-1,this.next_map_index=null,this.next_map_fade=0,this.star_map=new Map,this.tile_rand=new Map,this.collision_display=!1,this.grass_level=4,this.canvas=document.createElement("canvas"),this.fade_overlay=document.createElement("div"),this.tileset_image.src="tileset.png",this.moon_image.src="moon.png",this.title_image.src="title.png",window.addEventListener("DOMContentLoaded",this.dom_content_loaded.bind(this))}advance_map(t){this.next_map_index||(null==t&&(t=a.maps_list.length>this.current_map_index+1?this.current_map_index+1:-2),this.next_map_index=t)}load_map(t){var e,i;for(let t of this.objects)t.cleanup();if(this.objects.length=0,this.lines.length=0,this.tagged_objects.clear(),this.current_map_index=t,this.grass_level=1e3,t>=0){let h=a.maps_list[t];for(let t of h.layers)if("Objects"==t.name&&t.objects){let e=t.objects;for(let t of e){if(t.polygon)for(let e=0;e<t.polygon.length;e++){let i=e+1;i==t.polygon.length&&(i=0);let a=t.polygon[e],n=t.polygon[i];this.lines.push(new s.Line(t.x+a.x,t.y+a.y,t.x+n.x,t.y+n.y))}if(t.polyline)for(let e=0;e<t.polyline.length-1;e++){let i=e+1,a=t.polyline[e],n=t.polyline[i];this.lines.push(new s.Line(t.x+a.x,t.y+a.y,t.x+n.x,t.y+n.y))}t.text&&this.objects.push(new n.TextObject(t.x,t.y,t.properties,t.text,t.width,t.height)),"spawn"==t.type?this.spawn_coordinates=[t.x,t.y]:"switch"==t.type?this.objects.push(new n.SwitchObject(t.x,t.y,t.properties)):"gate"==t.type?this.objects.push(new n.GateObject(t.x,t.y,t.properties)):"exit"==t.type?this.objects.push(new n.ExitObject(t.x,t.y,t.properties)):"thread_extension"==t.type?this.objects.push(new n.ThreadExtensionObject(t.x,t.y,t.properties)):"bonus_coin"==t.type?this.objects.push(new n.BonusCoinObject(t.x,t.y,t.properties)):t.type&&console.warn("Unrecognized object type "+t.type)}}else if("Background"==t.name&&t.data&&(this.tiles_width=null!==(e=t.width)&&void 0!==e?e:0,this.tiles_height=null!==(i=t.height)&&void 0!==i?i:0,this.tiles=t.data,t.properties))for(let e of t.properties)"grass_level"==e.name&&(this.grass_level=e.value);this.objects.push(this.player=new o.PlayerObject(this.spawn_coordinates[0],this.spawn_coordinates[1]))}else this.tiles_width=0,this.tiles_height=0,this.tiles=[],this.player=null}simulate(t){null!=this.next_map_index?(this.next_map_fade=Math.min(this.next_map_fade+3*t,1),this.next_map_fade>=1&&(this.load_map(this.next_map_index),this.next_map_index=null)):this.next_map_fade=Math.max(this.next_map_fade-3*t,0),this.fade_overlay.style.opacity=""+this.next_map_fade;for(let e of this.objects)e.simulate(t)}keydown(t){var e;if(this.audio_ctx.resume(),"ArrowLeft"!=t.code&&"KeyA"!=t.code||(this.arrow_left=!0),"ArrowRight"!=t.code&&"KeyD"!=t.code||(this.arrow_right=!0),"ArrowUp"!=t.code&&"KeyW"!=t.code&&"Space"!=t.code||(this.arrow_up=!0,null===(e=this.player)||void 0===e||e.jump()),"ArrowDown"!=t.code&&"KeyS"!=t.code||(this.arrow_down=!0),this.debug_enabled&&("KeyP"==t.code&&(this.debug_pause=!0),"KeyO"==t.code&&(this.debug_slow=!0),"KeyL"==t.code&&(this.collision_display=!this.collision_display)),"KeyE"==t.code&&this.player)for(let t of this.objects)t!=this.player&&t.in_interact_range(this.player.x,this.player.y)&&t.interact();-1==this.current_map_index&&"KeyE"==t.code&&this.advance_map(0),"KeyR"==t.code&&this.advance_map(this.current_map_index)}keyup(t){"ArrowLeft"!=t.code&&"KeyA"!=t.code||(this.arrow_left=!1),"ArrowRight"!=t.code&&"KeyD"!=t.code||(this.arrow_right=!1),"ArrowUp"!=t.code&&"KeyW"!=t.code&&"Space"!=t.code||(this.arrow_up=!1),"ArrowDown"!=t.code&&"KeyS"!=t.code||(this.arrow_down=!1),"KeyP"==t.code&&(this.debug_pause=!1),"KeyO"==t.code&&(this.debug_slow=!1)}frame(t){let e=1;if(this.debug_pause&&(e=0),this.debug_slow&&(e=.1),-1==this.last_time&&(this.last_time=t),this.last_time<t-500&&(this.last_time=t-500),e<=0)this.last_time=t;else for(;this.last_time<t;){let i=Math.min(this.last_time+2.5/e,t);this.simulate(.001*(i-this.last_time)*e),this.last_time=i}let i=this.canvas,s=i.getBoundingClientRect(),a=Math.round(s.width*window.devicePixelRatio),n=Math.round(s.height*window.devicePixelRatio);a==i.width&&n==i.height||(i.width=a,i.height=n);let o=i.getContext("2d");if(!o)throw new Error("No 2d rendering context somehow");if(o.setTransform(),o.clearRect(0,0,i.width,i.height),o.scale(2,2),this.player&&o.translate(Math.round(-this.player.x)+Math.round(this.canvas.width/2/2),Math.round(-this.player.y)+Math.round(2*this.canvas.height/3/2)),o.imageSmoothingEnabled=!1,this.tiles.length&&this.player){let t=Math.floor(this.player.x/32-this.canvas.width/2/2/32),e=Math.floor(this.player.y/32-2*this.canvas.height/3/2/32),i=Math.ceil(this.player.x/32+this.canvas.width/2/2/32),s=Math.ceil(this.player.y/32+1*this.canvas.height/3/2/32);for(let a=e;a<s;a++)for(let e=t;e<i;e++){let t=this.tiles[a*this.tiles_width+e]-1;if(e<0||a<0||e>=this.tiles_width||a>=this.tiles_height){t=-1;let i=this.tile_rand.get(`${e},${a}`);i||(i=Math.random(),this.tile_rand.set(`${e},${a}`,i)),a==this.grass_level?t=6+Math.floor(4*i):a>this.grass_level&&(t=2+Math.floor(4*i))}if(t>=0){let i=t%16*32,s=32*Math.floor(t/16);t>=2&&t<=9&&(o.fillStyle="black",o.fillRect(32*e,32*a,32,32),o.globalAlpha=Math.max(.3,.95**(a-this.grass_level))),o.drawImage(this.tileset_image,i,s,32,32,32*e,32*a,32,32),o.globalAlpha=1}}}for(let t of this.objects)t.draw(o);if(this.collision_display){o.lineCap="butt",o.strokeStyle="red",o.lineWidth=1,o.beginPath();for(let t of this.lines){let e=t.x2-t.x1,i=t.y2-t.y1,s=1/Math.sqrt(e*e+i*i)*.5;e*=s,i*=s,o.moveTo(t.x1+i,t.y1-e),o.lineTo(t.x2+i,t.y2-e)}o.stroke(),o.strokeStyle="green",o.lineWidth=1,o.beginPath();for(let t of this.lines){let e=t.x2-t.x1,i=t.y2-t.y1,s=1/Math.sqrt(e*e+i*i)*.5;e*=s,i*=s,o.moveTo(t.x1-i,t.y1+e),o.lineTo(t.x2-i,t.y2+e)}o.stroke(),o.strokeStyle="yellow",o.lineWidth=1,o.beginPath();const t=.1;for(let e of this.lines)(e.vx1||e.vy1)&&(o.moveTo(e.x1,e.y1),o.lineTo(e.x1+e.vx1*t,e.y1+e.vy1*t)),(e.vx2||e.vy2)&&(o.moveTo(e.x2,e.y2),o.lineTo(e.x2+e.vx2*t,e.y2+e.vy2*t));o.stroke()}-2==this.current_map_index?(o.fillStyle="white",o.font="Verdana 60px",o.textAlign="center",o.textBaseline="middle",o.fillText("You reached the end of the game",i.width/2/2,i.height/2/2),o.font="Verdana 30px",o.fillText("Yeee",i.width/2/2,i.height/2/2+60)):-1==this.current_map_index&&(o.imageSmoothingEnabled=!0,o.drawImage(this.title_image,i.width/2/2-this.title_image.width/2,i.height/2/2-this.title_image.height/2),o.imageSmoothingEnabled=!1,o.fillStyle="white",o.font="30px Verdana",o.textAlign="center",o.textBaseline="bottom",o.fillText("Press E to play",i.width/2/2,i.height/2-30)),o.setTransform(),this.player&&(o.fillStyle="white",o.font="30px Verdana",o.textAlign="left",o.textBaseline="top",o.fillText(`Thread length: ${this.player.thread_length.toFixed(1)}`,30,15),o.fillText(`${0|this.player.x},${0|this.player.y}`,30,45))}dom_content_loaded(){this.load_map(-1),document.body.appendChild(this.canvas),this.canvas.id="the_canvas",document.body.appendChild(this.fade_overlay),this.fade_overlay.id="fade_overlay",document.addEventListener("keydown",this.keydown.bind(this)),document.addEventListener("keyup",this.keyup.bind(this)),window.requestAnimationFrame(this.frame_loop.bind(this))}frame_loop(t){try{this.frame(t)}catch(t){console.error(t),this.canvas.width=this.canvas.width}window.requestAnimationFrame(this.frame_loop.bind(this))}}e.Game=r,e.game_instance=new r,console.log(e.game_instance)},688:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.maps_list=void 0;const a=s(i(177)),n=s(i(156)),o=s(i(741));e.maps_list=[a.default,o.default,n.default]},647:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextObject=e.BonusCoinObject=e.ThreadExtensionObject=e.ItemObject=e.ExitObject=e.GateObject=e.SwitchableObject=e.SwitchObject=e.MapObject=void 0;const s=i(607),a=i(874);class n{constructor(t,e,i){if(this.properties=new Map,this.x=t,this.y=e,i)for(let t of i)this.properties.set(t.name,t.value)}simulate(t){}draw(t){}in_interact_range(t,e){return!1}interact(){}string_property(t,e){let i=this.properties.get(e);return"string"==typeof i?i:t}opt_string_property(t){let e=this.properties.get(t);return"string"==typeof e?e:null}float_property(t,e){let i=this.properties.get(e);return"number"==typeof i?i:t}bool_property(t,e){let i=this.properties.get(e);return"boolean"==typeof i?i:t}draw_interact_icon(t,e,i){t.textAlign="center",t.textBaseline="middle",t.font="15px Verdana",t.fillStyle="black",t.fillText("E",e,i+1),t.fillStyle="white",t.fillText("E",e,i),t.strokeStyle="black",t.lineWidth=2,t.beginPath(),t.arc(e,i,10,0,2*Math.PI),t.stroke(),t.strokeStyle="white",t.beginPath(),t.arc(e,i-1,10,0,2*Math.PI),t.stroke()}cleanup(){}}e.MapObject=n;class o extends n{constructor(t,e,i){super(t,e,i),this.is_on=!1,this.facing_right=!1,this.floored=!1,this.target_tag="",this.reset_time=0,this.reset_timer=0,this.facing_right=this.bool_property(this.facing_right,"facing_right"),this.floored=this.bool_property(this.floored,"floored"),this.target_tag=this.string_property(this.target_tag,"target_tag"),this.is_on=this.bool_property(!1,"is_on"),this.reset_time=this.float_property(this.reset_time,"reset_time"),this.update_tagged(!0)}draw(t){if(this.floored){let e=0,i=128;this.is_on&&(i+=16),this.reset_time&&(i+=128),t.drawImage(s.game_instance.tileset_image,e,i,32,16,this.x-16,this.y-16,32,16)}else{let e=0,i=64;this.is_on&&(i+=32),this.facing_right&&(e+=16),this.reset_time&&(i+=128),t.drawImage(s.game_instance.tileset_image,e,i,16,32,this.x-(this.facing_right?0:16),this.y-32,16,32)}s.game_instance.player&&this.in_interact_range(s.game_instance.player.x,s.game_instance.player.y)&&this.draw_interact_icon(t,this.x,this.y-32)}simulate(t){super.simulate(t),this.reset_time&&this.is_on&&(this.reset_timer+=t,this.reset_timer>this.reset_time&&(this.reset_timer=0,this.is_on=!1,s.game_instance.switch_off_sound.play(1),this.update_tagged()))}in_interact_range(t,e){let i=t-this.x,s=e-this.y;return i*i+s*s<1024}interact(){this.is_on&&this.reset_time||(this.is_on=!this.is_on,this.is_on?s.game_instance.switch_on_sound.play(1):s.game_instance.switch_off_sound.play(1),this.update_tagged())}update_tagged(t=!1){let e=this.target_tag.split("|");for(let i of e){i.startsWith("!")&&(i=i.substring(1));let e=s.game_instance.tagged_objects.get(i);e&&e.update_switch(this,t)}}}e.SwitchObject=o;class h extends n{constructor(t,e,i){super(t,e,i),this.tag=null,this.switches_on=new Set,this.tag=this.opt_string_property("tag"),this.tag&&s.game_instance.tagged_objects.set(this.tag,this)}update_switch(t,e=!1){if(t){let e=t.target_tag.split("|").includes("!"+this.tag);t.is_on!=e?this.switches_on.add(t):this.switches_on.delete(t)}}}e.SwitchableObject=h;const r={wood_4:{sx:0,sy:48,width:128,height:16},wood_2:{sx:0,sy:32,width:64,height:16}},l=[[0,0],[0,1],[1,1],[1,0]];e.GateObject=class extends h{constructor(t,e,i){super(t,e,i),this.dx=0,this.dy=0,this.rotation_initial=0,this.rotation_final=0,this.move_dx=0,this.move_dy=0,this.transition_time=0,this.state=0,this.transition_target=0,this.switched_on=!1,this.easing_constant=10,this.continuous=!1,this.continuous_bounce=!0,this.gain=s.game_instance.audio_ctx.createGain(),this.panner=s.game_instance.audio_ctx.createPanner(),this.base_translate_freq=1,this.base_rotate_freq=1,this.translate_sound=null,this.rotate_sound=null,this.translate_sound_2=null,this.rotate_sound_2=null,this.lines=[],this.gain.connect(this.panner),this.panner.connect(s.game_instance.audio_ctx.destination),this.panner.panningModel="HRTF";let n=this.properties.get("gate_type");if("string"!=typeof n)throw new Error("Missing gate type!");let h=r[n];if(!h)throw new Error("invalid gate type "+n);this.gate_type=h,this.dx=this.float_property(this.dx,"dx"),this.dy=this.float_property(this.dx,"dy"),this.move_dx=this.float_property(this.move_dx,"move_dx"),this.move_dy=this.float_property(this.move_dx,"move_dy"),this.rotation_initial=this.float_property(this.rotation_initial,"rotation_initial")*Math.PI/180,this.rotation_final=this.float_property(0,"rotation_final")*Math.PI/180,this.transition_time=this.float_property(0,"transition_time"),this.easing_constant=this.float_property(this.easing_constant,"easing_constant"),this.gain.gain.value=Math.min(this.transition_time/3,1),this.continuous=this.bool_property(this.continuous,"continuous"),this.continuous_bounce=this.bool_property(this.continuous_bounce,"continuous_bounce"),this.continuous&&(this.transition_target=1);for(let t=0;t<4;t++){let t=new a.Line(0,0,0,0);this.lines.push(t),s.game_instance.lines.push(t)}for(let t of s.game_instance.objects){if(!(t instanceof o))continue;let e=t.target_tag.split("|");this.tag&&(e.includes(this.tag)||e.includes("!"+this.tag))&&this.update_switch(t,!0)}this.tag||this.update_switch(null,!0),this.update_collision()}simulate(t){if(this.continuous&&!this.continuous_bounce&&(this.transition_target=1),this.continuous?this.switched_on:this.state!=this.transition_target){let e=this.transition_target-this.state;if(this.continuous)if(this.state+=t/this.transition_time*Math.sign(e),this.continuous_bounce){for(;this.state>=2;)this.state-=2;for(;this.state<0;)this.state+=2;this.state>1&&(this.state=2-this.state,this.transition_target=1-this.transition_target)}else{for(;this.state>=1;)this.state--;for(;this.state<0;)this.state++}else this.state+=Math.min(Math.abs(e),t/this.transition_time)*Math.sign(e);this.update_collision(),this.translate_sound||!this.move_dx&&!this.move_dy||(this.base_translate_freq=Math.sqrt(this.move_dx**2+this.move_dy**2)/this.transition_time*1,this.translate_sound=s.game_instance.audio_ctx.createOscillator(),this.translate_sound.frequency.value=this.base_translate_freq,this.translate_sound.type="triangle",this.translate_sound.start(),this.translate_sound.connect(this.gain),this.translate_sound_2=s.game_instance.audio_ctx.createOscillator(),this.translate_sound_2.frequency.value=this.base_translate_freq+100,this.translate_sound_2.type="triangle",this.translate_sound_2.start(),this.translate_sound_2.connect(this.gain)),this.rotate_sound||this.rotation_final==this.rotation_initial||(this.base_rotate_freq=Math.abs(this.rotation_final-this.rotation_initial)/this.transition_time*20,this.rotate_sound=s.game_instance.audio_ctx.createOscillator(),this.rotate_sound.frequency.value=this.base_rotate_freq,this.rotate_sound.type="triangle",this.rotate_sound.start(),this.rotate_sound.connect(this.gain),this.rotate_sound_2=s.game_instance.audio_ctx.createOscillator(),this.rotate_sound_2.frequency.value=this.base_rotate_freq+100,this.rotate_sound_2.type="triangle",this.rotate_sound_2.start(),this.rotate_sound_2.connect(this.gain)),this.translate_sound&&(this.translate_sound.frequency.value=this.base_translate_freq*this.easing_derivative(this.state)),this.translate_sound_2&&(this.translate_sound_2.frequency.value=this.base_translate_freq*this.easing_derivative(this.state)+100),this.rotate_sound&&(this.rotate_sound.frequency.value=this.base_rotate_freq*this.easing_derivative(this.state)),this.rotate_sound_2&&(this.rotate_sound_2.frequency.value=this.base_rotate_freq*this.easing_derivative(this.state)+100)}else this.translate_sound&&(this.translate_sound.stop(),this.translate_sound=null),this.rotate_sound&&(this.rotate_sound.stop(),this.rotate_sound=null),this.translate_sound_2&&(this.translate_sound_2.stop(),this.translate_sound_2=null),this.rotate_sound_2&&(this.rotate_sound_2.stop(),this.rotate_sound_2=null);this.panner.positionX.value=s.game_instance.audio_scale*(this.x+this.move_dx*this.state),this.panner.positionY.value=-s.game_instance.audio_scale*(this.y+this.move_dy*this.state)}cleanup(){super.cleanup(),this.translate_sound&&(this.translate_sound.stop(),this.translate_sound=null),this.rotate_sound&&(this.rotate_sound.stop(),this.translate_sound=null),this.translate_sound_2&&(this.translate_sound_2.stop(),this.translate_sound_2=null),this.rotate_sound_2&&(this.rotate_sound_2.stop(),this.rotate_sound_2=null)}get rotation(){let t=this.easing(this.state);return this.rotation_final*t+this.rotation_initial*(1-t)}draw(t){(this.move_dx||this.move_dy)&&(t.lineCap="round",t.strokeStyle="#333",t.lineWidth=4,t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+this.move_dx,this.y+this.move_dy),t.stroke(),t.strokeStyle="#777",t.lineWidth=3,t.beginPath(),t.moveTo(this.x+.5,this.y+.5),t.lineTo(this.x+this.move_dx+.5,this.y+this.move_dy+.5),t.stroke(),t.strokeStyle="black",t.lineWidth=2,t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+this.move_dx,this.y+this.move_dy),t.stroke());let e=this.easing(this.state);t.save(),t.translate(this.x+Math.round(e*this.move_dx),this.y+Math.round(e*this.move_dy)),t.rotate(this.rotation),t.drawImage(s.game_instance.tileset_image,this.gate_type.sx,this.gate_type.sy,this.gate_type.width,this.gate_type.height,this.dx,this.dy,this.gate_type.width,this.gate_type.height),t.rotate(-this.rotation),t.drawImage(s.game_instance.tileset_image,128,32,16,16,-8,-8,16,16),t.restore()}update_switch(t,e=!1){super.update_switch(t),this.switched_on=this.switches_on.size>0||!this.tag,this.continuous||(this.transition_target=this.switched_on?1:0),e&&!this.continuous&&(this.state=this.transition_target,this.update_collision())}update_collision(){let t=this.easing(this.state),e=this.easing_derivative(this.state),i=this.rotation,s=Math.cos(i),a=Math.sin(i),n=[];for(let i=0;i<l.length;i++){let o=this.dx+this.gate_type.width*l[i][0],h=this.dy+this.gate_type.height*l[i][1],r=o*s-h*a,_=o*a+h*s,y=0,d=0;if(this.continuous?this.switched_on:this.state!=this.transition_target){let t=1/this.transition_time*e*Math.sign(this.transition_target-this.state);y+=this.move_dx*t,d+=this.move_dy*t,y+=-_*(this.rotation_final-this.rotation_initial)*t,d+=r*(this.rotation_final-this.rotation_initial)*t}r+=this.x+this.move_dx*t,_+=this.y+this.move_dy*t,n.push([r,_,y,d])}for(let t=0;t<this.lines.length;t++){let e=this.lines[t];e.x1=n[t][0],e.y1=n[t][1],e.vx1=n[t][2],e.vy1=n[t][3];let i=(t+1)%n.length;e.x2=n[i][0],e.y2=n[i][1],e.vx2=n[i][2],e.vy2=n[i][3]}}easing(t){const e=this.easing_constant;return(1-t)*t**e+t*(1-(1-t)**e)}easing_derivative(t){const e=this.easing_constant;return e*t**(e-1)-(e+1)*t**e+1-(1-t)**e+e*t*(1-t)**(e-1)}},e.ExitObject=class extends n{constructor(t,e,i){super(t,e,i),this.particles=[],this.particle_timer=0;for(let t=0;t<100;t++)this.simulate(.01)}simulate(t){for(s.game_instance.player&&Math.abs(s.game_instance.player.x-this.x)<20&&Math.abs(s.game_instance.player.y-this.y)<1&&s.game_instance.advance_map(),this.particle_timer-=t;this.particle_timer<0;){this.particle_timer+=.03;let t=Math.cos(Math.random()*Math.PI);this.particles.push([32*(Math.sign(t)-t),2+2*Math.random(),0])}for(let e=0;e<this.particles.length;e++)this.particles[e][2]+=t,this.particles[e][2]>1&&(this.particles.splice(e,1),e--)}draw(t){for(let e of this.particles)t.fillStyle=`rgba(128, 140, 255, ${1-e[2]})`,t.fillRect(this.x+e[0],this.y+64*-e[2],e[1],e[1]);t.drawImage(s.game_instance.tileset_image,96,64,64,32,this.x-32,this.y,64,32)}};class _ extends n{constructor(){super(...arguments),this.picked_up=!1,this.timer=0}simulate(t){if(!this.picked_up&&(this.timer+=2*t,this.timer>2*Math.PI&&(this.timer-=2*Math.PI),s.game_instance.player)){let t=s.game_instance.player.x-this.x,e=s.game_instance.player.y-this.y;t*t+e*e<1024&&(this.picked_up=!0,this.pick_up())}}get_float_y(){return Math.round(3*Math.sin(this.timer))}pick_up(){}}e.ItemObject=_,e.ThreadExtensionObject=class extends _{constructor(t,e,i){super(t,e,i),this.length_to_add=300,this.length_to_add=this.float_property(this.length_to_add,"length_to_add")}draw(t){this.picked_up||t.drawImage(s.game_instance.tileset_image,0,160,32,32,this.x-16,this.y-16+this.get_float_y(),32,32)}pick_up(){s.game_instance.thread_extend_sound.play(),s.game_instance.player&&(s.game_instance.player.thread_limit+=this.length_to_add)}},e.BonusCoinObject=class extends _{constructor(t,e,i){super(t,e,i),this.particle_timer=0,this.particles=[];for(let t=0;t<100;t++)this.simulate(.01)}simulate(t){if(super.simulate(t),!this.picked_up)for(this.particle_timer-=t;this.particle_timer<0;){this.particle_timer+=.03;let t=Math.random()*Math.PI*2;this.particles.push([this.get_float_y(),Math.cos(t),Math.sin(t),0,Math.random()])}for(let e=0;e<this.particles.length;e++)this.particles[e][3]+=t,this.particles[e][3]>1&&(this.particles.splice(e,1),e--)}draw(t){for(let e of this.particles)t.fillStyle=`rgba(171, 106, 202, ${1-e[3]})`,t.fillRect(this.x+e[2]*e[3]*32-2*e[4],this.y+e[0]+e[1]*e[3]*32-2*e[4],4*e[4],4*e[4]);this.picked_up||t.drawImage(s.game_instance.tileset_image,32,160,32,32,this.x-16,this.y-16+this.get_float_y(),32,32)}pick_up(){for(let t=0;t<100;t++){let t=Math.random()*Math.PI*2,e=Math.random();this.particles.push([this.get_float_y(),4*Math.cos(t)*e,4*Math.sin(t)*e,0,Math.random()])}s.game_instance.bonus_coin_sound.play()}},e.TextObject=class extends n{constructor(t,e,i,s,a=128,n=32){super(t,e,i),this.text=s,this.width=a,this.height=n}draw(t){this.text&&(t.font="16px sans-serif",t.fillStyle=this.text.color,t.textAlign="left",t.textBaseline="top",t.fillText(this.text.text,this.x,this.y,this.width))}}},251:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerObject=void 0;const s=i(607),a=i(874),n=[];class o extends a.PhysicsObject{constructor(t=0,e=0){super(t,e,void 0,-12,-30,24,30),this.facing_right=!1,this.thread_points=[],this.thread_length=0,this.thread_limit=500,this.last_pre_len=null,this.last_endx=0,this.last_endy=0,this.thread_points=[[...s.game_instance.spawn_coordinates]]}draw(t){var e;t.lineWidth=3,t.strokeStyle="#90603a",t.lineJoin="round",t.lineCap="butt",t.beginPath();for(let e=0;e<this.thread_points.length;e++)0==e?t.moveTo(...h(this.thread_points[e])):t.lineTo(...h(this.thread_points[e]));t.lineTo(Math.round(this.x+0),Math.round(this.y+-8)),t.stroke();let i=0,a=0;for(let o=0;o<this.thread_points.length;o++){let r=this.thread_points[o],[l,_]=h(r),[y,d]=null!==(e=h(this.thread_points[o+1]))&&void 0!==e?e:[Math.round(this.x+0),Math.round(this.y+-8)],u=y-l,p=d-_,c=Math.sqrt(u*u+p*p);u/=c,p/=c;let g=0;u<p&&(g+=16);let x=c;for(t.save(),t.translate(l,_),t.transform(u,p,-p,u,0,0);x>0;){let e=Math.min(16-i,x),o=n[a];null==o&&(o=0,Math.random()<.5&&(o=Math.floor(4*Math.random())),n[a]=o),t.drawImage(s.game_instance.tileset_image,32+g+i,128+8*o,e,7,0,-3.5,e,7),i+=x,i>15.9999&&(i=0,a++),t.translate(e,0),x-=e}t.restore()}let o=64;this.facing_right&&(o+=32),t.drawImage(s.game_instance.tileset_image,32,o,32,32,Math.round(this.x)-16,Math.round(this.y)-32,32,32)}jump(){if(this.touching_floor){let[t,e]=this.touching_floor.point_velocity(this.x,this.y);this.velocity_x-=t,this.velocity_y-=e,this.velocity_y=-750,this.velocity_x+=t,this.velocity_y+=e}}simulate(t){var e,i;this.ground_friction_enabled=!0;let a=0,n=0;this.thread_length=0;let o=0,r=0,l=0,_=0;for(let t=0;t<this.thread_points.length;t++){let i=this.thread_points[t],[a,n]=h(i),[o,r]=null!==(e=h(this.thread_points[t+1]))&&void 0!==e?e:[this.x+0,this.y+-8],y=o-a,d=r-n,u=Math.sqrt(y*y+d*d);if(y/=u,d/=u,3==i.length&&t>0&&(r-_)*(a-l)-(o-l)*(n-_)>0!=i[2])this.thread_points.splice(t,1),this.last_pre_len=null,t--;else{for(let e of[...s.game_instance.lines].sort(((t,e)=>{let i=Math.abs((t.x2-t.x1)*d-(t.y2-t.y1)*y);return Math.abs((t.x2-t.x1)*d-(t.y2-t.y1)*y)-i}))){let i=e.instersect_ray(a,n,y,d);if(null!==i&&i>=.01&&i<=u-.01){let s=a+i*y,h=n+i*d,l=Math.abs(s-e.x1)+Math.abs(h-e.y1),_=Math.abs(s-e.x2)+Math.abs(h-e.y2),[u,p]=_<l?[e.x2,e.y2]:[e.x1,e.y1],c=Math.abs(u-a)+Math.abs(p-n),g=Math.abs(u-o)+Math.abs(p-r),x=(r-n)*(u-a)-(o-a)*(p-n);if(this.thread_points.length>100)console.log("Too many points!");else if((l<16||_<16)&&Math.abs(x)>.5&&c>1&&g>1){let i=[e,_<l,!1];i[2]=x>0,this.thread_points.splice(t+1,0,i),this.last_pre_len=null,t++;break}}}[l,_]=[a,n]}}for(let t=0;t<this.thread_points.length;t++){let e=this.thread_points[t],[s,y]=h(e),[d,u]=null!==(i=h(this.thread_points[t+1]))&&void 0!==i?i:[this.x+0,this.y+-8],p=d-s,c=u-y,g=Math.sqrt(p*p+c*c);t<this.thread_points.length-1&&(a+=g),this.thread_length+=g,n=g,p/=g,c/=g,o=p,r=c,[l,_]=[s,y]}if(this==s.game_instance.player&&(s.game_instance.arrow_left&&!s.game_instance.arrow_right?(this.touching_floor?this.velocity_x=-290:this.velocity_x=Math.max(this.velocity_x-2e3*t,Math.min(this.velocity_x,-290)),this.facing_right=!1):s.game_instance.arrow_right&&!s.game_instance.arrow_left&&(this.touching_floor?this.velocity_x=290:this.velocity_x=Math.min(this.velocity_x+2e3*t,Math.max(this.velocity_x,290)),this.facing_right=!0)),s.game_instance.arrow_left&&!s.game_instance.arrow_right?this.facing_right=!1:s.game_instance.arrow_right&&s.game_instance.arrow_left&&(this.facing_right=!0),this.thread_length>this.thread_limit){this.thread_length-this.thread_limit>64&&s.game_instance.advance_map(s.game_instance.current_map_index);let e=Math.min(this.thread_length-this.thread_limit,5,n);this.thread_length-=e;let i=-(o*this.velocity_x+r*this.velocity_y);null!=this.last_pre_len&&(i-=(a-this.last_pre_len)/t,i-=(n-Math.sqrt((this.last_endx-this.x-0)**2+(this.last_endy-this.y- -8)**2))/t),i=Math.min(i,0),this.x-=o*e,this.y-=r*e,this.velocity_x+=i*o,this.velocity_y+=i*r,this.ground_friction_enabled=!1}this.last_pre_len=a,this.last_endx=l,this.last_endy=_,s.game_instance.audio_ctx.listener.positionX.value=this.x*s.game_instance.audio_scale,s.game_instance.audio_ctx.listener.positionY.value=-this.y*s.game_instance.audio_scale,s.game_instance.audio_ctx.listener.positionZ.value=10,super.simulate(t)}}function h(t){if(t)return 3==t.length?t[1]?[t[0].x2,t[0].y2]:[t[0].x1,t[0].y1]:t}e.PlayerObject=o},761:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=void 0;const s=i(607);e.Sound=class{constructor(t){this.buffer=null,fetch(t).then((async t=>{let e=await t.arrayBuffer();s.game_instance.audio_ctx.decodeAudioData(e,(t=>{this.buffer=t}),(t=>{console.error(t)}))}))}play(t=1){if(!this.buffer)return;let e=s.game_instance.audio_ctx.createBufferSource();e.buffer=this.buffer,e.connect(s.game_instance.audio_ctx.destination),e.playbackRate.value=t,e.start()}}}},e={};!function i(s){if(e[s])return e[s].exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}(607)})();